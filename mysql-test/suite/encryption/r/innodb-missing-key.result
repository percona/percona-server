call mtr.add_suppression("InnoDB: The page \\[page id: space=[1-9][0-9]*, page number=[1-9][0-9]*\\] in file '.*test.t[123]\\.ibd' cannot be decrypted\\.");
call mtr.add_suppression("failed to read or decrypt \\[page id: space=[1-9][0-9]*, page number=[1-9][0-9]*\\]");
call mtr.add_suppression("\\[Error\\] InnoDB: Page is still encrypted");
call mtr.add_suppression("\\[Warning\\] InnoDB: Table is encrypted but encryption service or used key_id is not available\.  Can't continue reading table\.");
CREATE TABLE t1(a int not null primary key, b varchar(128)) engine=innodb ENCRYPTION='KEYRING' ENCRYPTION_KEY_ID=7;
CREATE TABLE t2(a int not null primary key, b varchar(128)) engine=innodb ENCRYPTION='KEYRING' ENCRYPTION_KEY_ID=6;
CREATE TABLE t3(a int not null primary key, b varchar(128)) engine=innodb ENCRYPTION='N';
insert into t1 values (500, 'thisissecretmessage');
insert into t1 values (499, 'thisissecretmessage');
insert into t1 values (498, 'thisissecretmessage');
insert into t1 values (497, 'thisissecretmessage');
insert into t1 values (496, 'thisissecretmessage');
insert into t1 values (495, 'thisissecretmessage');
insert into t1 values (494, 'thisissecretmessage');
insert into t1 values (493, 'thisissecretmessage');
insert into t1 values (492, 'thisissecretmessage');
insert into t1 values (491, 'thisissecretmessage');
insert into t1 values (490, 'thisissecretmessage');
insert into t1 values (489, 'thisissecretmessage');
insert into t1 values (488, 'thisissecretmessage');
insert into t1 values (487, 'thisissecretmessage');
insert into t1 values (486, 'thisissecretmessage');
insert into t1 values (485, 'thisissecretmessage');
insert into t1 values (484, 'thisissecretmessage');
insert into t1 values (483, 'thisissecretmessage');
insert into t1 values (482, 'thisissecretmessage');
insert into t1 values (481, 'thisissecretmessage');
insert into t1 values (480, 'thisissecretmessage');
insert into t1 values (479, 'thisissecretmessage');
insert into t1 values (478, 'thisissecretmessage');
insert into t1 values (477, 'thisissecretmessage');
insert into t1 values (476, 'thisissecretmessage');
insert into t1 values (475, 'thisissecretmessage');
insert into t1 values (474, 'thisissecretmessage');
insert into t1 values (473, 'thisissecretmessage');
insert into t1 values (472, 'thisissecretmessage');
insert into t1 values (471, 'thisissecretmessage');
insert into t1 values (470, 'thisissecretmessage');
insert into t1 values (469, 'thisissecretmessage');
insert into t1 values (468, 'thisissecretmessage');
insert into t1 values (467, 'thisissecretmessage');
insert into t1 values (466, 'thisissecretmessage');
insert into t1 values (465, 'thisissecretmessage');
insert into t1 values (464, 'thisissecretmessage');
insert into t1 values (463, 'thisissecretmessage');
insert into t1 values (462, 'thisissecretmessage');
insert into t1 values (461, 'thisissecretmessage');
insert into t1 values (460, 'thisissecretmessage');
insert into t1 values (459, 'thisissecretmessage');
insert into t1 values (458, 'thisissecretmessage');
insert into t1 values (457, 'thisissecretmessage');
insert into t1 values (456, 'thisissecretmessage');
insert into t1 values (455, 'thisissecretmessage');
insert into t1 values (454, 'thisissecretmessage');
insert into t1 values (453, 'thisissecretmessage');
insert into t1 values (452, 'thisissecretmessage');
insert into t1 values (451, 'thisissecretmessage');
insert into t1 values (450, 'thisissecretmessage');
insert into t1 values (449, 'thisissecretmessage');
insert into t1 values (448, 'thisissecretmessage');
insert into t1 values (447, 'thisissecretmessage');
insert into t1 values (446, 'thisissecretmessage');
insert into t1 values (445, 'thisissecretmessage');
insert into t1 values (444, 'thisissecretmessage');
insert into t1 values (443, 'thisissecretmessage');
insert into t1 values (442, 'thisissecretmessage');
insert into t1 values (441, 'thisissecretmessage');
insert into t1 values (440, 'thisissecretmessage');
insert into t1 values (439, 'thisissecretmessage');
insert into t1 values (438, 'thisissecretmessage');
insert into t1 values (437, 'thisissecretmessage');
insert into t1 values (436, 'thisissecretmessage');
insert into t1 values (435, 'thisissecretmessage');
insert into t1 values (434, 'thisissecretmessage');
insert into t1 values (433, 'thisissecretmessage');
insert into t1 values (432, 'thisissecretmessage');
insert into t1 values (431, 'thisissecretmessage');
insert into t1 values (430, 'thisissecretmessage');
insert into t1 values (429, 'thisissecretmessage');
insert into t1 values (428, 'thisissecretmessage');
insert into t1 values (427, 'thisissecretmessage');
insert into t1 values (426, 'thisissecretmessage');
insert into t1 values (425, 'thisissecretmessage');
insert into t1 values (424, 'thisissecretmessage');
insert into t1 values (423, 'thisissecretmessage');
insert into t1 values (422, 'thisissecretmessage');
insert into t1 values (421, 'thisissecretmessage');
insert into t1 values (420, 'thisissecretmessage');
insert into t1 values (419, 'thisissecretmessage');
insert into t1 values (418, 'thisissecretmessage');
insert into t1 values (417, 'thisissecretmessage');
insert into t1 values (416, 'thisissecretmessage');
insert into t1 values (415, 'thisissecretmessage');
insert into t1 values (414, 'thisissecretmessage');
insert into t1 values (413, 'thisissecretmessage');
insert into t1 values (412, 'thisissecretmessage');
insert into t1 values (411, 'thisissecretmessage');
insert into t1 values (410, 'thisissecretmessage');
insert into t1 values (409, 'thisissecretmessage');
insert into t1 values (408, 'thisissecretmessage');
insert into t1 values (407, 'thisissecretmessage');
insert into t1 values (406, 'thisissecretmessage');
insert into t1 values (405, 'thisissecretmessage');
insert into t1 values (404, 'thisissecretmessage');
insert into t1 values (403, 'thisissecretmessage');
insert into t1 values (402, 'thisissecretmessage');
insert into t1 values (401, 'thisissecretmessage');
insert into t1 values (400, 'thisissecretmessage');
insert into t1 values (399, 'thisissecretmessage');
insert into t1 values (398, 'thisissecretmessage');
insert into t1 values (397, 'thisissecretmessage');
insert into t1 values (396, 'thisissecretmessage');
insert into t1 values (395, 'thisissecretmessage');
insert into t1 values (394, 'thisissecretmessage');
insert into t1 values (393, 'thisissecretmessage');
insert into t1 values (392, 'thisissecretmessage');
insert into t1 values (391, 'thisissecretmessage');
insert into t1 values (390, 'thisissecretmessage');
insert into t1 values (389, 'thisissecretmessage');
insert into t1 values (388, 'thisissecretmessage');
insert into t1 values (387, 'thisissecretmessage');
insert into t1 values (386, 'thisissecretmessage');
insert into t1 values (385, 'thisissecretmessage');
insert into t1 values (384, 'thisissecretmessage');
insert into t1 values (383, 'thisissecretmessage');
insert into t1 values (382, 'thisissecretmessage');
insert into t1 values (381, 'thisissecretmessage');
insert into t1 values (380, 'thisissecretmessage');
insert into t1 values (379, 'thisissecretmessage');
insert into t1 values (378, 'thisissecretmessage');
insert into t1 values (377, 'thisissecretmessage');
insert into t1 values (376, 'thisissecretmessage');
insert into t1 values (375, 'thisissecretmessage');
insert into t1 values (374, 'thisissecretmessage');
insert into t1 values (373, 'thisissecretmessage');
insert into t1 values (372, 'thisissecretmessage');
insert into t1 values (371, 'thisissecretmessage');
insert into t1 values (370, 'thisissecretmessage');
insert into t1 values (369, 'thisissecretmessage');
insert into t1 values (368, 'thisissecretmessage');
insert into t1 values (367, 'thisissecretmessage');
insert into t1 values (366, 'thisissecretmessage');
insert into t1 values (365, 'thisissecretmessage');
insert into t1 values (364, 'thisissecretmessage');
insert into t1 values (363, 'thisissecretmessage');
insert into t1 values (362, 'thisissecretmessage');
insert into t1 values (361, 'thisissecretmessage');
insert into t1 values (360, 'thisissecretmessage');
insert into t1 values (359, 'thisissecretmessage');
insert into t1 values (358, 'thisissecretmessage');
insert into t1 values (357, 'thisissecretmessage');
insert into t1 values (356, 'thisissecretmessage');
insert into t1 values (355, 'thisissecretmessage');
insert into t1 values (354, 'thisissecretmessage');
insert into t1 values (353, 'thisissecretmessage');
insert into t1 values (352, 'thisissecretmessage');
insert into t1 values (351, 'thisissecretmessage');
insert into t1 values (350, 'thisissecretmessage');
insert into t1 values (349, 'thisissecretmessage');
insert into t1 values (348, 'thisissecretmessage');
insert into t1 values (347, 'thisissecretmessage');
insert into t1 values (346, 'thisissecretmessage');
insert into t1 values (345, 'thisissecretmessage');
insert into t1 values (344, 'thisissecretmessage');
insert into t1 values (343, 'thisissecretmessage');
insert into t1 values (342, 'thisissecretmessage');
insert into t1 values (341, 'thisissecretmessage');
insert into t1 values (340, 'thisissecretmessage');
insert into t1 values (339, 'thisissecretmessage');
insert into t1 values (338, 'thisissecretmessage');
insert into t1 values (337, 'thisissecretmessage');
insert into t1 values (336, 'thisissecretmessage');
insert into t1 values (335, 'thisissecretmessage');
insert into t1 values (334, 'thisissecretmessage');
insert into t1 values (333, 'thisissecretmessage');
insert into t1 values (332, 'thisissecretmessage');
insert into t1 values (331, 'thisissecretmessage');
insert into t1 values (330, 'thisissecretmessage');
insert into t1 values (329, 'thisissecretmessage');
insert into t1 values (328, 'thisissecretmessage');
insert into t1 values (327, 'thisissecretmessage');
insert into t1 values (326, 'thisissecretmessage');
insert into t1 values (325, 'thisissecretmessage');
insert into t1 values (324, 'thisissecretmessage');
insert into t1 values (323, 'thisissecretmessage');
insert into t1 values (322, 'thisissecretmessage');
insert into t1 values (321, 'thisissecretmessage');
insert into t1 values (320, 'thisissecretmessage');
insert into t1 values (319, 'thisissecretmessage');
insert into t1 values (318, 'thisissecretmessage');
insert into t1 values (317, 'thisissecretmessage');
insert into t1 values (316, 'thisissecretmessage');
insert into t1 values (315, 'thisissecretmessage');
insert into t1 values (314, 'thisissecretmessage');
insert into t1 values (313, 'thisissecretmessage');
insert into t1 values (312, 'thisissecretmessage');
insert into t1 values (311, 'thisissecretmessage');
insert into t1 values (310, 'thisissecretmessage');
insert into t1 values (309, 'thisissecretmessage');
insert into t1 values (308, 'thisissecretmessage');
insert into t1 values (307, 'thisissecretmessage');
insert into t1 values (306, 'thisissecretmessage');
insert into t1 values (305, 'thisissecretmessage');
insert into t1 values (304, 'thisissecretmessage');
insert into t1 values (303, 'thisissecretmessage');
insert into t1 values (302, 'thisissecretmessage');
insert into t1 values (301, 'thisissecretmessage');
insert into t1 values (300, 'thisissecretmessage');
insert into t1 values (299, 'thisissecretmessage');
insert into t1 values (298, 'thisissecretmessage');
insert into t1 values (297, 'thisissecretmessage');
insert into t1 values (296, 'thisissecretmessage');
insert into t1 values (295, 'thisissecretmessage');
insert into t1 values (294, 'thisissecretmessage');
insert into t1 values (293, 'thisissecretmessage');
insert into t1 values (292, 'thisissecretmessage');
insert into t1 values (291, 'thisissecretmessage');
insert into t1 values (290, 'thisissecretmessage');
insert into t1 values (289, 'thisissecretmessage');
insert into t1 values (288, 'thisissecretmessage');
insert into t1 values (287, 'thisissecretmessage');
insert into t1 values (286, 'thisissecretmessage');
insert into t1 values (285, 'thisissecretmessage');
insert into t1 values (284, 'thisissecretmessage');
insert into t1 values (283, 'thisissecretmessage');
insert into t1 values (282, 'thisissecretmessage');
insert into t1 values (281, 'thisissecretmessage');
insert into t1 values (280, 'thisissecretmessage');
insert into t1 values (279, 'thisissecretmessage');
insert into t1 values (278, 'thisissecretmessage');
insert into t1 values (277, 'thisissecretmessage');
insert into t1 values (276, 'thisissecretmessage');
insert into t1 values (275, 'thisissecretmessage');
insert into t1 values (274, 'thisissecretmessage');
insert into t1 values (273, 'thisissecretmessage');
insert into t1 values (272, 'thisissecretmessage');
insert into t1 values (271, 'thisissecretmessage');
insert into t1 values (270, 'thisissecretmessage');
insert into t1 values (269, 'thisissecretmessage');
insert into t1 values (268, 'thisissecretmessage');
insert into t1 values (267, 'thisissecretmessage');
insert into t1 values (266, 'thisissecretmessage');
insert into t1 values (265, 'thisissecretmessage');
insert into t1 values (264, 'thisissecretmessage');
insert into t1 values (263, 'thisissecretmessage');
insert into t1 values (262, 'thisissecretmessage');
insert into t1 values (261, 'thisissecretmessage');
insert into t1 values (260, 'thisissecretmessage');
insert into t1 values (259, 'thisissecretmessage');
insert into t1 values (258, 'thisissecretmessage');
insert into t1 values (257, 'thisissecretmessage');
insert into t1 values (256, 'thisissecretmessage');
insert into t1 values (255, 'thisissecretmessage');
insert into t1 values (254, 'thisissecretmessage');
insert into t1 values (253, 'thisissecretmessage');
insert into t1 values (252, 'thisissecretmessage');
insert into t1 values (251, 'thisissecretmessage');
insert into t1 values (250, 'thisissecretmessage');
insert into t1 values (249, 'thisissecretmessage');
insert into t1 values (248, 'thisissecretmessage');
insert into t1 values (247, 'thisissecretmessage');
insert into t1 values (246, 'thisissecretmessage');
insert into t1 values (245, 'thisissecretmessage');
insert into t1 values (244, 'thisissecretmessage');
insert into t1 values (243, 'thisissecretmessage');
insert into t1 values (242, 'thisissecretmessage');
insert into t1 values (241, 'thisissecretmessage');
insert into t1 values (240, 'thisissecretmessage');
insert into t1 values (239, 'thisissecretmessage');
insert into t1 values (238, 'thisissecretmessage');
insert into t1 values (237, 'thisissecretmessage');
insert into t1 values (236, 'thisissecretmessage');
insert into t1 values (235, 'thisissecretmessage');
insert into t1 values (234, 'thisissecretmessage');
insert into t1 values (233, 'thisissecretmessage');
insert into t1 values (232, 'thisissecretmessage');
insert into t1 values (231, 'thisissecretmessage');
insert into t1 values (230, 'thisissecretmessage');
insert into t1 values (229, 'thisissecretmessage');
insert into t1 values (228, 'thisissecretmessage');
insert into t1 values (227, 'thisissecretmessage');
insert into t1 values (226, 'thisissecretmessage');
insert into t1 values (225, 'thisissecretmessage');
insert into t1 values (224, 'thisissecretmessage');
insert into t1 values (223, 'thisissecretmessage');
insert into t1 values (222, 'thisissecretmessage');
insert into t1 values (221, 'thisissecretmessage');
insert into t1 values (220, 'thisissecretmessage');
insert into t1 values (219, 'thisissecretmessage');
insert into t1 values (218, 'thisissecretmessage');
insert into t1 values (217, 'thisissecretmessage');
insert into t1 values (216, 'thisissecretmessage');
insert into t1 values (215, 'thisissecretmessage');
insert into t1 values (214, 'thisissecretmessage');
insert into t1 values (213, 'thisissecretmessage');
insert into t1 values (212, 'thisissecretmessage');
insert into t1 values (211, 'thisissecretmessage');
insert into t1 values (210, 'thisissecretmessage');
insert into t1 values (209, 'thisissecretmessage');
insert into t1 values (208, 'thisissecretmessage');
insert into t1 values (207, 'thisissecretmessage');
insert into t1 values (206, 'thisissecretmessage');
insert into t1 values (205, 'thisissecretmessage');
insert into t1 values (204, 'thisissecretmessage');
insert into t1 values (203, 'thisissecretmessage');
insert into t1 values (202, 'thisissecretmessage');
insert into t1 values (201, 'thisissecretmessage');
insert into t1 values (200, 'thisissecretmessage');
insert into t1 values (199, 'thisissecretmessage');
insert into t1 values (198, 'thisissecretmessage');
insert into t1 values (197, 'thisissecretmessage');
insert into t1 values (196, 'thisissecretmessage');
insert into t1 values (195, 'thisissecretmessage');
insert into t1 values (194, 'thisissecretmessage');
insert into t1 values (193, 'thisissecretmessage');
insert into t1 values (192, 'thisissecretmessage');
insert into t1 values (191, 'thisissecretmessage');
insert into t1 values (190, 'thisissecretmessage');
insert into t1 values (189, 'thisissecretmessage');
insert into t1 values (188, 'thisissecretmessage');
insert into t1 values (187, 'thisissecretmessage');
insert into t1 values (186, 'thisissecretmessage');
insert into t1 values (185, 'thisissecretmessage');
insert into t1 values (184, 'thisissecretmessage');
insert into t1 values (183, 'thisissecretmessage');
insert into t1 values (182, 'thisissecretmessage');
insert into t1 values (181, 'thisissecretmessage');
insert into t1 values (180, 'thisissecretmessage');
insert into t1 values (179, 'thisissecretmessage');
insert into t1 values (178, 'thisissecretmessage');
insert into t1 values (177, 'thisissecretmessage');
insert into t1 values (176, 'thisissecretmessage');
insert into t1 values (175, 'thisissecretmessage');
insert into t1 values (174, 'thisissecretmessage');
insert into t1 values (173, 'thisissecretmessage');
insert into t1 values (172, 'thisissecretmessage');
insert into t1 values (171, 'thisissecretmessage');
insert into t1 values (170, 'thisissecretmessage');
insert into t1 values (169, 'thisissecretmessage');
insert into t1 values (168, 'thisissecretmessage');
insert into t1 values (167, 'thisissecretmessage');
insert into t1 values (166, 'thisissecretmessage');
insert into t1 values (165, 'thisissecretmessage');
insert into t1 values (164, 'thisissecretmessage');
insert into t1 values (163, 'thisissecretmessage');
insert into t1 values (162, 'thisissecretmessage');
insert into t1 values (161, 'thisissecretmessage');
insert into t1 values (160, 'thisissecretmessage');
insert into t1 values (159, 'thisissecretmessage');
insert into t1 values (158, 'thisissecretmessage');
insert into t1 values (157, 'thisissecretmessage');
insert into t1 values (156, 'thisissecretmessage');
insert into t1 values (155, 'thisissecretmessage');
insert into t1 values (154, 'thisissecretmessage');
insert into t1 values (153, 'thisissecretmessage');
insert into t1 values (152, 'thisissecretmessage');
insert into t1 values (151, 'thisissecretmessage');
insert into t1 values (150, 'thisissecretmessage');
insert into t1 values (149, 'thisissecretmessage');
insert into t1 values (148, 'thisissecretmessage');
insert into t1 values (147, 'thisissecretmessage');
insert into t1 values (146, 'thisissecretmessage');
insert into t1 values (145, 'thisissecretmessage');
insert into t1 values (144, 'thisissecretmessage');
insert into t1 values (143, 'thisissecretmessage');
insert into t1 values (142, 'thisissecretmessage');
insert into t1 values (141, 'thisissecretmessage');
insert into t1 values (140, 'thisissecretmessage');
insert into t1 values (139, 'thisissecretmessage');
insert into t1 values (138, 'thisissecretmessage');
insert into t1 values (137, 'thisissecretmessage');
insert into t1 values (136, 'thisissecretmessage');
insert into t1 values (135, 'thisissecretmessage');
insert into t1 values (134, 'thisissecretmessage');
insert into t1 values (133, 'thisissecretmessage');
insert into t1 values (132, 'thisissecretmessage');
insert into t1 values (131, 'thisissecretmessage');
insert into t1 values (130, 'thisissecretmessage');
insert into t1 values (129, 'thisissecretmessage');
insert into t1 values (128, 'thisissecretmessage');
insert into t1 values (127, 'thisissecretmessage');
insert into t1 values (126, 'thisissecretmessage');
insert into t1 values (125, 'thisissecretmessage');
insert into t1 values (124, 'thisissecretmessage');
insert into t1 values (123, 'thisissecretmessage');
insert into t1 values (122, 'thisissecretmessage');
insert into t1 values (121, 'thisissecretmessage');
insert into t1 values (120, 'thisissecretmessage');
insert into t1 values (119, 'thisissecretmessage');
insert into t1 values (118, 'thisissecretmessage');
insert into t1 values (117, 'thisissecretmessage');
insert into t1 values (116, 'thisissecretmessage');
insert into t1 values (115, 'thisissecretmessage');
insert into t1 values (114, 'thisissecretmessage');
insert into t1 values (113, 'thisissecretmessage');
insert into t1 values (112, 'thisissecretmessage');
insert into t1 values (111, 'thisissecretmessage');
insert into t1 values (110, 'thisissecretmessage');
insert into t1 values (109, 'thisissecretmessage');
insert into t1 values (108, 'thisissecretmessage');
insert into t1 values (107, 'thisissecretmessage');
insert into t1 values (106, 'thisissecretmessage');
insert into t1 values (105, 'thisissecretmessage');
insert into t1 values (104, 'thisissecretmessage');
insert into t1 values (103, 'thisissecretmessage');
insert into t1 values (102, 'thisissecretmessage');
insert into t1 values (101, 'thisissecretmessage');
insert into t1 values (100, 'thisissecretmessage');
insert into t1 values (99, 'thisissecretmessage');
insert into t1 values (98, 'thisissecretmessage');
insert into t1 values (97, 'thisissecretmessage');
insert into t1 values (96, 'thisissecretmessage');
insert into t1 values (95, 'thisissecretmessage');
insert into t1 values (94, 'thisissecretmessage');
insert into t1 values (93, 'thisissecretmessage');
insert into t1 values (92, 'thisissecretmessage');
insert into t1 values (91, 'thisissecretmessage');
insert into t1 values (90, 'thisissecretmessage');
insert into t1 values (89, 'thisissecretmessage');
insert into t1 values (88, 'thisissecretmessage');
insert into t1 values (87, 'thisissecretmessage');
insert into t1 values (86, 'thisissecretmessage');
insert into t1 values (85, 'thisissecretmessage');
insert into t1 values (84, 'thisissecretmessage');
insert into t1 values (83, 'thisissecretmessage');
insert into t1 values (82, 'thisissecretmessage');
insert into t1 values (81, 'thisissecretmessage');
insert into t1 values (80, 'thisissecretmessage');
insert into t1 values (79, 'thisissecretmessage');
insert into t1 values (78, 'thisissecretmessage');
insert into t1 values (77, 'thisissecretmessage');
insert into t1 values (76, 'thisissecretmessage');
insert into t1 values (75, 'thisissecretmessage');
insert into t1 values (74, 'thisissecretmessage');
insert into t1 values (73, 'thisissecretmessage');
insert into t1 values (72, 'thisissecretmessage');
insert into t1 values (71, 'thisissecretmessage');
insert into t1 values (70, 'thisissecretmessage');
insert into t1 values (69, 'thisissecretmessage');
insert into t1 values (68, 'thisissecretmessage');
insert into t1 values (67, 'thisissecretmessage');
insert into t1 values (66, 'thisissecretmessage');
insert into t1 values (65, 'thisissecretmessage');
insert into t1 values (64, 'thisissecretmessage');
insert into t1 values (63, 'thisissecretmessage');
insert into t1 values (62, 'thisissecretmessage');
insert into t1 values (61, 'thisissecretmessage');
insert into t1 values (60, 'thisissecretmessage');
insert into t1 values (59, 'thisissecretmessage');
insert into t1 values (58, 'thisissecretmessage');
insert into t1 values (57, 'thisissecretmessage');
insert into t1 values (56, 'thisissecretmessage');
insert into t1 values (55, 'thisissecretmessage');
insert into t1 values (54, 'thisissecretmessage');
insert into t1 values (53, 'thisissecretmessage');
insert into t1 values (52, 'thisissecretmessage');
insert into t1 values (51, 'thisissecretmessage');
insert into t1 values (50, 'thisissecretmessage');
insert into t1 values (49, 'thisissecretmessage');
insert into t1 values (48, 'thisissecretmessage');
insert into t1 values (47, 'thisissecretmessage');
insert into t1 values (46, 'thisissecretmessage');
insert into t1 values (45, 'thisissecretmessage');
insert into t1 values (44, 'thisissecretmessage');
insert into t1 values (43, 'thisissecretmessage');
insert into t1 values (42, 'thisissecretmessage');
insert into t1 values (41, 'thisissecretmessage');
insert into t1 values (40, 'thisissecretmessage');
insert into t1 values (39, 'thisissecretmessage');
insert into t1 values (38, 'thisissecretmessage');
insert into t1 values (37, 'thisissecretmessage');
insert into t1 values (36, 'thisissecretmessage');
insert into t1 values (35, 'thisissecretmessage');
insert into t1 values (34, 'thisissecretmessage');
insert into t1 values (33, 'thisissecretmessage');
insert into t1 values (32, 'thisissecretmessage');
insert into t1 values (31, 'thisissecretmessage');
insert into t1 values (30, 'thisissecretmessage');
insert into t1 values (29, 'thisissecretmessage');
insert into t1 values (28, 'thisissecretmessage');
insert into t1 values (27, 'thisissecretmessage');
insert into t1 values (26, 'thisissecretmessage');
insert into t1 values (25, 'thisissecretmessage');
insert into t1 values (24, 'thisissecretmessage');
insert into t1 values (23, 'thisissecretmessage');
insert into t1 values (22, 'thisissecretmessage');
insert into t1 values (21, 'thisissecretmessage');
insert into t1 values (20, 'thisissecretmessage');
insert into t1 values (19, 'thisissecretmessage');
insert into t1 values (18, 'thisissecretmessage');
insert into t1 values (17, 'thisissecretmessage');
insert into t1 values (16, 'thisissecretmessage');
insert into t1 values (15, 'thisissecretmessage');
insert into t1 values (14, 'thisissecretmessage');
insert into t1 values (13, 'thisissecretmessage');
insert into t1 values (12, 'thisissecretmessage');
insert into t1 values (11, 'thisissecretmessage');
insert into t1 values (10, 'thisissecretmessage');
insert into t1 values (9, 'thisissecretmessage');
insert into t1 values (8, 'thisissecretmessage');
insert into t1 values (7, 'thisissecretmessage');
insert into t1 values (6, 'thisissecretmessage');
insert into t1 values (5, 'thisissecretmessage');
insert into t1 values (4, 'thisissecretmessage');
insert into t1 values (3, 'thisissecretmessage');
insert into t1 values (2, 'thisissecretmessage');
insert into t1 values (1, 'thisissecretmessage');
INSERT INTO t2 SELECT * FROM t1;
INSERT INTO t3 SELECT * FROM t1;

# Restart server with keys3.txt
# restart:--keyring-file-data=MYSQLTEST_VARDIR/std_data/keys3.txt
set global innodb_encryption_rotate_key_age = 1;
use test;
CREATE TABLE t4(a int not null primary key, b varchar(128)) engine=innodb ENCRYPTION='KEYRING' ENCRYPTION_KEY_ID=6;
SELECT SLEEP(5);
SLEEP(5)
0
SELECT COUNT(1) FROM t3;
COUNT(1)
500
SELECT COUNT(1) FROM t2;
COUNT(1)
500
SELECT COUNT(1) FROM t2,t1 where t2.a = t1.a;
ERROR HY000: Got error 500 'Table encrypted but decryption failed. This could be because correct encryption management plugin is not loaded, used encryption key is not available or encryption method does not match.' from InnoDB
SELECT COUNT(1) FROM t1 where b = 'ab';
ERROR HY000: Got error 500 'Table encrypted but decryption failed. This could be because correct encryption management plugin is not loaded, used encryption key is not available or encryption method does not match.' from InnoDB
SELECT COUNT(1) FROM t1;
ERROR HY000: Got error 500 'Table encrypted but decryption failed. This could be because correct encryption management plugin is not loaded, used encryption key is not available or encryption method does not match.' from InnoDB

# Start server with keys2.txt
# restart:--keyring-file-data=MYSQLTEST_VARDIR/std_data/keys2.txt
SELECT COUNT(1) FROM t1;
COUNT(1)
500
SELECT COUNT(1) FROM t2;
COUNT(1)
500
SELECT COUNT(1) FROM t3;
COUNT(1)
500
DROP TABLE t1, t2, t3;
