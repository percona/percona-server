drop table if exists t1;
CREATE TABLE t1(i serial);
INSERT INTO t1 VALUES(null);
CREATE TABLE t2(i int , j serial);
INSERT INTO t2 VALUES(1, null);
FLUSH TABLES test.t1 FOR EXPORT;
UNLOCK TABLES;
ALTER TABLE test.t1 DISCARD TABLESPACE;
ALTER TABLE test.t1 IMPORT TABLESPACE;
CHECK TABLE test.t1;
Table	Op	Msg_type	Msg_text
test.t1	check	status	OK
SHOW CREATE TABLE test.t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `i` bigint unsigned NOT NULL AUTO_INCREMENT,
  UNIQUE KEY `i` (`i`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
SELECT * FROM test.t1;
i
1
# Flush the table and put IBD/CFG files aside for later import.
FLUSH TABLE t1 FOR EXPORT;
"copy done"
UNLOCK TABLES;
ALTER TABLE t1 DISCARD TABLESPACE;
ALTER TABLE t1 IMPORT TABLESPACE;
INSERT INTO t1 VALUES(null);
FLUSH TABLE t2 FOR EXPORT;
"copy done"
UNLOCK TABLES;
ALTER TABLE t2 DISCARD TABLESPACE;
ALTER TABLE t2 IMPORT TABLESPACE;
INSERT INTO t2 VALUES(1, null);
# restart
INSERT INTO t1 VALUES(null);
DROP TABLE t1;
INSERT INTO t2 VALUES(3,null);
DROP TABLE t2;
