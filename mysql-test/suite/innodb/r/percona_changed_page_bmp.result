RESET CHANGED_PAGE_BITMAPS;
DROP TABLE IF EXISTS t1, t2;
CREATE TABLE t1 (x INT) ENGINE=InnoDB;
INSERT INTO t1 VALUES (1),(2),(3),(4),(5);
ib_modified_log_1
1st restart
INSERT INTO t1 VALUES (1),(2),(3),(4),(5);
ib_modified_log_1
ib_modified_log_2
2nd restart
INSERT INTO t1 VALUES (1),(2),(3),(4),(5);
ib_modified_log_1
ib_modified_log_2
ib_modified_log_3
call mtr.add_suppression("last tracked LSN in");
3rd restart
INSERT INTO t1 SELECT x FROM t1;
INSERT INTO t1 SELECT x FROM t1;
INSERT INTO t1 SELECT x FROM t1;
INSERT INTO t1 SELECT x FROM t1;
INSERT INTO t1 SELECT x FROM t1;
INSERT INTO t1 SELECT x FROM t1;
INSERT INTO t1 SELECT x FROM t1;
INSERT INTO t1 SELECT x FROM t1;
INSERT INTO t1 SELECT x FROM t1;
INSERT INTO t1 SELECT x FROM t1;
INSERT INTO t1 SELECT x FROM t1;
INSERT INTO t1 SELECT x FROM t1;
INSERT INTO t1 SELECT x FROM t1;
INSERT INTO t1 SELECT x FROM t1;
INSERT INTO t1 SELECT x FROM t1;
CREATE TABLE t2 (x INT) ENGINE=InnoDB;
INSERT INTO t2 VALUES (1),(2),(3),(4),(5);
ib_modified_log_1
ib_modified_log_2
call mtr.add_suppression("the age of last tracked LSN exceeds log capacity");
4th restart
INSERT INTO t1 VALUES (1),(2),(3),(4),(5);
ib_modified_log_1
ib_modified_log_2
5th restart
INSERT INTO t1 VALUES (1),(2),(3),(4),(5);
ib_modified_log_1
6th restart
call mtr.add_suppression("truncated block detected.*");
ib_modified_log_1
ib_modified_log_2
7th restart
ib_modified_log_1
ib_modified_log_2
ib_modified_log_3
DROP TABLE t1, t2;
call mtr.add_suppression("Failed to find tablespace for table");
call mtr.add_suppression("Allocated tablespace [0-9]+, old maximum was");
8th restart
RESET CHANGED_PAGE_BITMAPS;
call mtr.add_suppression("InnoDB: Error: page [0-9]* log sequence number [0-9]*");
SET GLOBAL innodb_fast_shutdown=0;
11th restart
SELECT @@innodb_read_only;
@@innodb_read_only
1
SELECT @@innodb_track_changed_pages;
@@innodb_track_changed_pages
0
12th restart
call mtr.add_suppression("New log files created");
call mtr.add_suppression("Creating foreign key constraint system tables");
call mtr.add_suppression("Cannot open table mysql/[a-z_]+ from the internal data dictionary");
call mtr.add_suppression("Info table is not ready to be used");
13th restart
select * from information_schema.innodb_changed_pages;
space_id	page_id	start_lsn	end_lsn
0	0	8716	49463
0	1	8716	49463
0	2	8716	49463
0	3	8716	49463
0	4	8716	49463
0	5	8716	49463
0	6	8716	49463
0	7	8716	49463
0	8	8716	49463
0	9	8716	49463
0	10	8716	49463
0	11	8716	49463
0	12	8716	49463
0	13	8716	49463
0	14	8716	49463
0	15	8716	49463
0	16	8716	49463
0	17	8716	49463
0	18	8716	49463
0	19	8716	49463
0	20	8716	49463
0	21	8716	49463
0	22	8716	49463
0	23	8716	49463
0	24	8716	49463
0	25	8716	49463
0	26	8716	49463
0	27	8716	49463
0	28	8716	49463
0	29	8716	49463
0	30	8716	49463
0	31	8716	49463
0	32	8716	49463
0	33	8716	49463
0	34	8716	49463
0	35	8716	49463
0	36	8716	49463
0	37	8716	49463
0	38	8716	49463
0	39	8716	49463
0	40	8716	49463
0	41	8716	49463
0	42	8716	49463
0	43	8716	49463
0	44	8716	49463
ib_modified_log_1
14th restart
