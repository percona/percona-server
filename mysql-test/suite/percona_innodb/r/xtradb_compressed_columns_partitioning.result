SET @saved_default_storage_engine = @@default_storage_engine;
CREATE TEMPORARY TABLE expected_create_table_errors(
default_se VARCHAR(16) NOT NULL,
table_se VARCHAR(16) NOT NULL,
partition_se VARCHAR(16) NOT NULL,
error_code VARCHAR(32) NOT NULL
);
INSERT INTO expected_create_table_errors VALUES
('MyISAM',       '',       '', 'handler_does_not_support'),
('MyISAM',       '', 'MyISAM', 'handler_does_not_support'),
('MyISAM', 'MyISAM',       '', 'handler_does_not_support'),
('MyISAM', 'MyISAM', 'MyISAM', 'handler_does_not_support'),
('MyISAM', 'MyISAM', 'InnoDB', 'mix_handlers'            ),
('MyISAM', 'InnoDB', 'MyISAM', 'mix_handlers'            ),
('InnoDB',       '', 'MyISAM', 'handler_does_not_support'),
('InnoDB', 'MyISAM',       '', 'handler_does_not_support'),
('InnoDB', 'MyISAM', 'MyISAM', 'handler_does_not_support'),
('InnoDB', 'MyISAM', 'InnoDB', 'mix_handlers'            ),
('InnoDB', 'InnoDB', 'MyISAM', 'mix_handlers'            )
;
default: 'MyISAM', table: '', partition: '', error: 'handler_does_not_support'
SET default_storage_engine = MyISAM;
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED
) 
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100) ,
PARTITION p2 VALUES LESS THAN MAXVALUE 
);
ERROR 42000: The storage engine for the table doesn't support native partitioning
default: 'MyISAM', table: '', partition: 'MyISAM', error: 'handler_does_not_support'
SET default_storage_engine = MyISAM;
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED
) 
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100) ENGINE=MyISAM,
PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE=MyISAM
);
ERROR 42000: The storage engine for the table doesn't support native partitioning
default: 'MyISAM', table: '', partition: 'InnoDB', error: ''
SET default_storage_engine = MyISAM;
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED
) 
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100) ENGINE=InnoDB,
PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE=InnoDB
);
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint unsigned NOT NULL,
  `a` varchar(250) /*!50633 COLUMN_FORMAT COMPRESSED */ DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
/*!50100 PARTITION BY RANGE (`id`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
DROP TABLE t1;
default: 'MyISAM', table: 'MyISAM', partition: '', error: 'handler_does_not_support'
SET default_storage_engine = MyISAM;
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED
) ENGINE=MyISAM
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100) ,
PARTITION p2 VALUES LESS THAN MAXVALUE 
);
ERROR 42000: The storage engine for the table doesn't support native partitioning
default: 'MyISAM', table: 'MyISAM', partition: 'MyISAM', error: 'handler_does_not_support'
SET default_storage_engine = MyISAM;
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED
) ENGINE=MyISAM
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100) ENGINE=MyISAM,
PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE=MyISAM
);
ERROR 42000: The storage engine for the table doesn't support native partitioning
default: 'MyISAM', table: 'MyISAM', partition: 'InnoDB', error: 'mix_handlers'
SET default_storage_engine = MyISAM;
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED
) ENGINE=MyISAM
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100) ENGINE=InnoDB,
PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE=InnoDB
);
ERROR HY000: The mix of handlers in the partitions is not allowed in this version of MySQL
default: 'MyISAM', table: 'InnoDB', partition: '', error: ''
SET default_storage_engine = MyISAM;
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED
) ENGINE=InnoDB
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100) ,
PARTITION p2 VALUES LESS THAN MAXVALUE 
);
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint unsigned NOT NULL,
  `a` varchar(250) /*!50633 COLUMN_FORMAT COMPRESSED */ DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
/*!50100 PARTITION BY RANGE (`id`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
DROP TABLE t1;
default: 'MyISAM', table: 'InnoDB', partition: 'MyISAM', error: 'mix_handlers'
SET default_storage_engine = MyISAM;
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED
) ENGINE=InnoDB
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100) ENGINE=MyISAM,
PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE=MyISAM
);
ERROR HY000: The mix of handlers in the partitions is not allowed in this version of MySQL
default: 'MyISAM', table: 'InnoDB', partition: 'InnoDB', error: ''
SET default_storage_engine = MyISAM;
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED
) ENGINE=InnoDB
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100) ENGINE=InnoDB,
PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE=InnoDB
);
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint unsigned NOT NULL,
  `a` varchar(250) /*!50633 COLUMN_FORMAT COMPRESSED */ DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
/*!50100 PARTITION BY RANGE (`id`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
DROP TABLE t1;
default: 'InnoDB', table: '', partition: '', error: ''
SET default_storage_engine = InnoDB;
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED
) 
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100) ,
PARTITION p2 VALUES LESS THAN MAXVALUE 
);
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint unsigned NOT NULL,
  `a` varchar(250) /*!50633 COLUMN_FORMAT COMPRESSED */ DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
/*!50100 PARTITION BY RANGE (`id`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
DROP TABLE t1;
default: 'InnoDB', table: '', partition: 'MyISAM', error: 'handler_does_not_support'
SET default_storage_engine = InnoDB;
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED
) 
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100) ENGINE=MyISAM,
PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE=MyISAM
);
ERROR 42000: The storage engine for the table doesn't support native partitioning
default: 'InnoDB', table: '', partition: 'InnoDB', error: ''
SET default_storage_engine = InnoDB;
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED
) 
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100) ENGINE=InnoDB,
PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE=InnoDB
);
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint unsigned NOT NULL,
  `a` varchar(250) /*!50633 COLUMN_FORMAT COMPRESSED */ DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
/*!50100 PARTITION BY RANGE (`id`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
DROP TABLE t1;
default: 'InnoDB', table: 'MyISAM', partition: '', error: 'handler_does_not_support'
SET default_storage_engine = InnoDB;
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED
) ENGINE=MyISAM
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100) ,
PARTITION p2 VALUES LESS THAN MAXVALUE 
);
ERROR 42000: The storage engine for the table doesn't support native partitioning
default: 'InnoDB', table: 'MyISAM', partition: 'MyISAM', error: 'handler_does_not_support'
SET default_storage_engine = InnoDB;
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED
) ENGINE=MyISAM
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100) ENGINE=MyISAM,
PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE=MyISAM
);
ERROR 42000: The storage engine for the table doesn't support native partitioning
default: 'InnoDB', table: 'MyISAM', partition: 'InnoDB', error: 'mix_handlers'
SET default_storage_engine = InnoDB;
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED
) ENGINE=MyISAM
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100) ENGINE=InnoDB,
PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE=InnoDB
);
ERROR HY000: The mix of handlers in the partitions is not allowed in this version of MySQL
default: 'InnoDB', table: 'InnoDB', partition: '', error: ''
SET default_storage_engine = InnoDB;
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED
) ENGINE=InnoDB
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100) ,
PARTITION p2 VALUES LESS THAN MAXVALUE 
);
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint unsigned NOT NULL,
  `a` varchar(250) /*!50633 COLUMN_FORMAT COMPRESSED */ DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
/*!50100 PARTITION BY RANGE (`id`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
DROP TABLE t1;
default: 'InnoDB', table: 'InnoDB', partition: 'MyISAM', error: 'mix_handlers'
SET default_storage_engine = InnoDB;
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED
) ENGINE=InnoDB
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100) ENGINE=MyISAM,
PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE=MyISAM
);
ERROR HY000: The mix of handlers in the partitions is not allowed in this version of MySQL
default: 'InnoDB', table: 'InnoDB', partition: 'InnoDB', error: ''
SET default_storage_engine = InnoDB;
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED
) ENGINE=InnoDB
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100) ENGINE=InnoDB,
PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE=InnoDB
);
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint unsigned NOT NULL,
  `a` varchar(250) /*!50633 COLUMN_FORMAT COMPRESSED */ DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
/*!50100 PARTITION BY RANGE (`id`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
DROP TABLE t1;
SET default_storage_engine = @saved_default_storage_engine;
CREATE COMPRESSION_DICTIONARY numbers ('one' 'two' 'three');
CREATE TEMPORARY TABLE expected_alter_table_errors(
original_se VARCHAR(16) NOT NULL,
alter_se VARCHAR(16) NOT NULL,
error_code VARCHAR(32) NOT NULL
);
INSERT INTO expected_alter_table_errors VALUES
('MyISAM',       '', 'handler_does_not_support'),
('MyISAM', 'MyISAM', 'handler_does_not_support'),
('InnoDB', 'MyISAM', 'handler_does_not_support')
;
original: 'InnoDB', alter: '', operation: '0', error: ''
CREATE TABLE t1(
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250)
) ENGINE=InnoDB
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100),
PARTITION p2 VALUES LESS THAN MAXVALUE
);
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint unsigned NOT NULL,
  `a` varchar(250) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
/*!50100 PARTITION BY RANGE (`id`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
ALTER TABLE t1 MODIFY a VARCHAR(250) COLUMN_FORMAT COMPRESSED;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint unsigned NOT NULL,
  `a` varchar(250) /*!50633 COLUMN_FORMAT COMPRESSED */ DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
/*!50100 PARTITION BY RANGE (`id`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
DROP TABLE t1;
original: 'InnoDB', alter: '', operation: '1', error: ''
CREATE TABLE t1(
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250)
) ENGINE=InnoDB
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100),
PARTITION p2 VALUES LESS THAN MAXVALUE
);
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint unsigned NOT NULL,
  `a` varchar(250) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
/*!50100 PARTITION BY RANGE (`id`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
ALTER TABLE t1 MODIFY a VARCHAR(250) COLUMN_FORMAT COMPRESSED WITH COMPRESSION_DICTIONARY numbers;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint unsigned NOT NULL,
  `a` varchar(250) /*!50633 COLUMN_FORMAT COMPRESSED WITH COMPRESSION_DICTIONARY `numbers` */ DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
/*!50100 PARTITION BY RANGE (`id`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
DROP TABLE t1;
original: 'InnoDB', alter: 'MyISAM', operation: '0', error: 'handler_does_not_support'
CREATE TABLE t1(
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250)
) ENGINE=InnoDB
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100),
PARTITION p2 VALUES LESS THAN MAXVALUE
);
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint unsigned NOT NULL,
  `a` varchar(250) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
/*!50100 PARTITION BY RANGE (`id`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
ALTER TABLE t1 MODIFY a VARCHAR(250) COLUMN_FORMAT COMPRESSED, ENGINE=MyISAM;
ERROR HY000: Table storage engine 'MyISAM' does not support the create option 'COMPRESSED COLUMNS'
DROP TABLE t1;
original: 'InnoDB', alter: 'MyISAM', operation: '1', error: 'handler_does_not_support'
CREATE TABLE t1(
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250)
) ENGINE=InnoDB
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100),
PARTITION p2 VALUES LESS THAN MAXVALUE
);
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint unsigned NOT NULL,
  `a` varchar(250) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
/*!50100 PARTITION BY RANGE (`id`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
ALTER TABLE t1 MODIFY a VARCHAR(250) COLUMN_FORMAT COMPRESSED WITH COMPRESSION_DICTIONARY numbers, ENGINE=MyISAM;
ERROR HY000: Table storage engine 'MyISAM' does not support the create option 'COMPRESSED COLUMNS'
DROP TABLE t1;
original: 'InnoDB', alter: 'InnoDB', operation: '0', error: ''
CREATE TABLE t1(
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250)
) ENGINE=InnoDB
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100),
PARTITION p2 VALUES LESS THAN MAXVALUE
);
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint unsigned NOT NULL,
  `a` varchar(250) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
/*!50100 PARTITION BY RANGE (`id`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
ALTER TABLE t1 MODIFY a VARCHAR(250) COLUMN_FORMAT COMPRESSED, ENGINE=InnoDB;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint unsigned NOT NULL,
  `a` varchar(250) /*!50633 COLUMN_FORMAT COMPRESSED */ DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
/*!50100 PARTITION BY RANGE (`id`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
DROP TABLE t1;
original: 'InnoDB', alter: 'InnoDB', operation: '1', error: ''
CREATE TABLE t1(
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250)
) ENGINE=InnoDB
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100),
PARTITION p2 VALUES LESS THAN MAXVALUE
);
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint unsigned NOT NULL,
  `a` varchar(250) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
/*!50100 PARTITION BY RANGE (`id`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
ALTER TABLE t1 MODIFY a VARCHAR(250) COLUMN_FORMAT COMPRESSED WITH COMPRESSION_DICTIONARY numbers, ENGINE=InnoDB;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint unsigned NOT NULL,
  `a` varchar(250) /*!50633 COLUMN_FORMAT COMPRESSED WITH COMPRESSION_DICTIONARY `numbers` */ DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
/*!50100 PARTITION BY RANGE (`id`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
DROP TABLE t1;
DROP COMPRESSION_DICTIONARY numbers;
CREATE COMPRESSION_DICTIONARY numbers ('one' 'two' 'three');
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED WITH COMPRESSION_DICTIONARY numbers DEFAULT NULL
) ENGINE=InnoDB
PARTITION BY RANGE (id) (
PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE = InnoDB
);
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint unsigned NOT NULL,
  `a` varchar(250) /*!50633 COLUMN_FORMAT COMPRESSED WITH COMPRESSION_DICTIONARY `numbers` */ DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
/*!50100 PARTITION BY RANGE (`id`)
(PARTITION p1 VALUES LESS THAN (100) ENGINE = InnoDB,
 PARTITION p2 VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
DROP TABLE t1;
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED WITH COMPRESSION_DICTIONARY numbers DEFAULT NULL
) ENGINE=InnoDB
PARTITION BY HASH (id)
PARTITIONS 2;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint unsigned NOT NULL,
  `a` varchar(250) /*!50633 COLUMN_FORMAT COMPRESSED WITH COMPRESSION_DICTIONARY `numbers` */ DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
/*!50100 PARTITION BY HASH (`id`)
PARTITIONS 2 */
DROP TABLE t1;
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED WITH COMPRESSION_DICTIONARY numbers DEFAULT NULL
) ENGINE=InnoDB
PARTITION BY RANGE (id)
SUBPARTITION BY HASH(id)
SUBPARTITIONS 2 (
PARTITION p0 VALUES LESS THAN (1024) (
SUBPARTITION s0 ENGINE=InnoDB,
SUBPARTITION s1 ENGINE=InnoDB
),
PARTITION p1 VALUES LESS THAN MAXVALUE (
SUBPARTITION s2 ENGINE=InnoDB,
SUBPARTITION s3 ENGINE=InnoDB
)
);
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint unsigned NOT NULL,
  `a` varchar(250) /*!50633 COLUMN_FORMAT COMPRESSED WITH COMPRESSION_DICTIONARY `numbers` */ DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
/*!50100 PARTITION BY RANGE (`id`)
SUBPARTITION BY HASH (`id`)
(PARTITION p0 VALUES LESS THAN (1024)
 (SUBPARTITION s0 ENGINE = InnoDB,
  SUBPARTITION s1 ENGINE = InnoDB),
 PARTITION p1 VALUES LESS THAN MAXVALUE
 (SUBPARTITION s2 ENGINE = InnoDB,
  SUBPARTITION s3 ENGINE = InnoDB)) */
DROP TABLE t1;
CREATE TABLE t1 (
id BIGINT UNSIGNED NOT NULL,
a VARCHAR(250) COLUMN_FORMAT COMPRESSED WITH COMPRESSION_DICTIONARY numbers DEFAULT NULL
) ENGINE=InnoDB
PARTITION BY RANGE (id)
SUBPARTITION BY HASH(id)
SUBPARTITIONS 2 (
PARTITION p0 VALUES LESS THAN (1024) ENGINE = InnoDB,
PARTITION p1 VALUES LESS THAN MAXVALUE ENGINE = InnoDB
);
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint unsigned NOT NULL,
  `a` varchar(250) /*!50633 COLUMN_FORMAT COMPRESSED WITH COMPRESSION_DICTIONARY `numbers` */ DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
/*!50100 PARTITION BY RANGE (`id`)
SUBPARTITION BY HASH (`id`)
SUBPARTITIONS 2
(PARTITION p0 VALUES LESS THAN (1024) ENGINE = InnoDB,
 PARTITION p1 VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
DROP TABLE t1;
DROP COMPRESSION_DICTIONARY numbers;
