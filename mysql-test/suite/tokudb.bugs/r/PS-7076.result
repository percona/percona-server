CREATE TABLE t1 (
id int(11) NOT NULL AUTO_INCREMENT,
a int(11) DEFAULT NULL,
b int(11) DEFAULT NULL,
c varchar(10) DEFAULT NULL,
d date NOT NULL,
PRIMARY KEY (id,d),
KEY a (a),
KEY b (b),
KEY c (c)
) ENGINE=TokuDB DEFAULT CHARSET=latin1
PARTITION BY RANGE (to_days(d))
(PARTITION p20200427 VALUES LESS THAN (737908) ENGINE = TokuDB,
PARTITION p20200428 VALUES LESS THAN (737909) ENGINE = TokuDB,
PARTITION p20200429 VALUES LESS THAN (737910) ENGINE = TokuDB);
Warnings:
Warning	1287	The partition engine, used by table 'test.t1', is deprecated and will be removed in a future release. Please use native partitioning instead.
SET tokudb_analyze_in_background=0;
set tokudb_analyze_time=0;
INSERT INTO t1 VALUES(NULL, RAND()*1000, RAND()*10000, "hello", "2020-04-28");
Warnings:
Warning	1287	The partition engine, used by table 'test.t1', is deprecated and will be removed in a future release. Please use native partitioning instead.
INSERT INTO t1 SELECT NULL, RAND()*1000, RAND()*10000, c, d FROM t1;
INSERT INTO t1 SELECT NULL, RAND()*1000, RAND()*10000, c, d FROM t1;
INSERT INTO t1 SELECT NULL, RAND()*1000, RAND()*10000, c, d FROM t1;
INSERT INTO t1 SELECT NULL, RAND()*1000, RAND()*10000, c, d FROM t1;
INSERT INTO t1 SELECT NULL, RAND()*1000, RAND()*10000, c, d FROM t1;
INSERT INTO t1 SELECT NULL, RAND()*1000, RAND()*10000, c, d FROM t1;
INSERT INTO t1 SELECT NULL, RAND()*1000, RAND()*10000, c, d FROM t1;
INSERT INTO t1 SELECT NULL, RAND()*1000, RAND()*10000, c, d FROM t1;
INSERT INTO t1 SELECT NULL, RAND()*1000, RAND()*10000, c, d FROM t1;
INSERT INTO t1 SELECT NULL, RAND()*1000, RAND()*10000, c, d FROM t1;
INSERT INTO t1 SELECT NULL, RAND()*1000, RAND()*10000, c, d FROM t1;
ANALYZE TABLE t1;
Table	Op	Msg_type	Msg_text
test.t1	analyze	status	OK
test.t1	analyze	warning	The partition engine, used by table 'test.t1', is deprecated and will be removed in a future release. Please use native partitioning instead.
SHOW INDEXES FROM t1;
Table	Non_unique	Key_name	Seq_in_index	Column_name	Collation	Cardinality	Sub_part	Packed	Null	Index_type	Comment	Index_comment
t1	0	PRIMARY	1	id	A	2050	NULL	NULL		BTREE		
t1	0	PRIMARY	2	d	A	2050	NULL	NULL		BTREE		
t1	1	a	1	a	A	1025	NULL	NULL	YES	BTREE		
t1	1	b	1	b	A	2050	NULL	NULL	YES	BTREE		
t1	1	c	1	c	A	1	NULL	NULL	YES	BTREE		
DROP TABLE t1;
