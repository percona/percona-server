# Parser test for tablespace encrypt option

call mtr.add_suppression("Encryption can't find master key, please check the keyring plugin is loaded");

--error ER_PARSE_ERROR
CREATE TABLESPACE t1 ENCRYPT='y';

CREATE TABLESPACE ts_valid2 ADD DATAFILE 'ts_valid2.ibd' ENCRYPTION='';

--error ER_CREATE_FILEGROUP_FAILED
CREATE TABLESPACE t2 ADD DATAFILE 't2.ibd' ENCRYPTION='y';
--error ER_PARSE_ERROR
CREATE TABLESPACE t3 ENCRYPTION='y' ADD DATAFILE 't3.ibd';

--error ER_INVALID_ENCRYPTION_OPTION
CREATE TABLESPACE t4 ADD DATAFILE 't4.ibd' ENCRYPTION='xyz';

--error ER_PARSE_ERROR
CREATE TABLESPACE t5 ADD DATAFILE 't5.ibd' ENCRYPTION=y;

--error ER_PARSE_ERROR
CREATE TABLESPACE t6 ADD DATAFILE 't6.ibd' ENCRYPTION=1;

--error ER_PARSE_ERROR
CREATE TABLESPACE t7 ADD DATAFILE 't7.ibd' ENCRYPTION=y;

--error ER_INVALID_ENCRYPTION_OPTION
CREATE TABLESPACE t8 ADD DATAFILE 't8.ibd' ENCRYPTION 'xyz';

--error ER_PARSE_ERROR
CREATE TABLESPACE t9 ADD DATAFILE 't9.ibd' ENCRYPTION y;

--error ER_PARSE_ERROR
ALTER TABLESPACE t10 ENCRYPTION='y';

DROP TABLESPACE ts_valid2;
