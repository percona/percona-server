--source include/have_query_response_time_plugin.inc

SET GLOBAL query_response_time_flush='ON';

SHOW VARIABLES WHERE VARIABLE_NAME LIKE 'query_response_time%' AND VARIABLE_NAME!='query_response_time_audit_exec_time_debug';
SHOW CREATE TABLE INFORMATION_SCHEMA.QUERY_RESPONSE_TIME;
--query_vertical SELECT PLUGIN_NAME, PLUGIN_VERSION, PLUGIN_TYPE, PLUGIN_AUTHOR, PLUGIN_DESCRIPTION, PLUGIN_LICENSE FROM INFORMATION_SCHEMA.PLUGINS WHERE PLUGIN_NAME LIKE 'query_response_time%';
SET GLOBAL QUERY_RESPONSE_TIME_STATS=1;
SELECT 1;

--echo #
--echo # Bug 1538019: Crash on attempting to execute non-existing prepared statement
--echo #
--error ER_UNKNOWN_STMT_HANDLER
EXECUTE bug1538019;

SET GLOBAL QUERY_RESPONSE_TIME_STATS=default;
SELECT SUM(COUNT) FROM INFORMATION_SCHEMA.QUERY_RESPONSE_TIME;
